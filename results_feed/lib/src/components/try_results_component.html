<div *ngIf="reviewInfo != null">
  <h2>
    <a href="http://dart-review.googlesource.com/c/sdk/+/{{review}}/{{patchset}}"
       target="_blank">{{reviewInfo.title}}</a>
  </h2>

  <h2 *ngIf="changeGroup.changes.isEmpty">No changed test results</h2>
  <results-panel *ngIf="!approving"
      [changes]="changeGroup.changes"
      [builds]="builds"
      [builders]="builders">
  </results-panel>
  <results-selector-panel *ngIf="approving"
      [changes]="changeGroup.changes"
      [builds]="builds"
      [builders]="builders"
      [selected]="selected"
      failuresOnly>
  </results-selector-panel>
  <div *ngFor="let c of changeGroup.comments"
      class="comment">
    <b>{{c.approvedText()}}</b>
    <span class="nowrap">{{formattedDate(c.created)}}</span>
    {{formattedEmail(c.author)}}<br>
    <div style="padding-left: 32px">{{c.comment}}</div>
  </div>
  <div *ngIf="approving">
    Comment:<br>
    <material-input
        multiline
        style="width: 80%"
        label="Comment"
        required
        rows="3"
        [(ngModel)]="commentText"></material-input>
  </div>
  <div>
    <material-button
        *ngIf="approveEnabled && !approving"
        raised
        (click)="approving = true">
      Approve/Comment ...
    </material-button>
    <material-button
        *ngIf="approving"
        raised
        (click)="approving = false">
      Cancel
    </material-button>
    <material-button
        *ngIf="approving"
        raised
        (click)="approve(false)">
      Revoke Selected Approvals
    </material-button>
    <material-button
        *ngIf="approving"
        raised
        (click)="approve(null)">
      Comment without Approving
    </material-button>
    <material-button
        *ngIf="approving"
        raised
        (click)="approve(true)">
      Approve
    </material-button>
  </div>

</div>