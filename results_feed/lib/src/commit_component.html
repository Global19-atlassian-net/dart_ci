<div class="commit" *ngIf="commit.show(filterService)">
  <div
      class="commit-subblock"
      (click)="collapsedBlamelist = !collapsedBlamelist">
    <div *ngFor="let c of commit.commits; let i=index" style="margin-bottom: 8px">
      <div *ngIf="showBlamelistEntry(i)">
        <b>{{c.title}}</b><br>
        <a href="https://github.com/dart-lang/sdk/commit/{{c.hash}}"
           target="_blank">
          {{c.hash.substring(6)}}
        </a> {{c.author}} {{c.created.toString().substring(5,16)}}<br>
      </div>
      <div *ngIf="showDots(i)"><b>&vellip;</b>({{commit.range.length - 2}}
        commits)
      </div>
    </div>
  </div>
  <div *ngIf="commit.shownChanges(filterService).show(filterService)"
       class="commit-subblock">
    <div *ngFor="let configurationGroup of commit.shownChanges(filterService).shown(filterService)">
      <material-chips>
        <template
            ngFor
            let-configuration
            [ngForOf]="configurationGroup.configurations.summaries.keys">
          <material-chip
              tooltipTarget
              #chip="tooltipTarget"
              [removable]="false"
              displayNameRenderer>
            {{configuration}}
          </material-chip>
          <material-tooltip-card [for]="chip">
            <div *deferredContent>
              <span *ngFor="let singleConfiguration of configurationGroup.configurations.summaries[configuration]">
                {{singleConfiguration}}<br>
              </span>
            </div>
          </material-tooltip-card>
        </template>
      </material-chips>
      <div
          *ngFor="let resultGroup of configurationGroup.shown(filterService)"
          style="margin-left: 16px">
        <span [class]="resultGroup.first.resultStyle">
          {{resultGroup.changesText}}
        </span><br>
        <span *ngFor="let change of resultGroup.take(resultLimit)"
              tooltipTarget #logs="tooltipTarget"
              style="cursor: pointer">
          {{change.name}}<br>
          <material-tooltip-card
              [for]="logs"
              [preferredPositions]="preferredTooltipPositions">
            <div *deferredContent>
              <h4>Logs</h4>
              <dart-log
                  *ngFor="let configuration of change.configurations.configurations"
                  [configuration]="configuration"
                  [index]="commit.range.end"
                  [test]="change.name">
              </dart-log>
            </div>
          </material-tooltip-card>
        </span>
        <div
            *ngIf="resultGroup.length > resultLimit"
            (click)="resultLimit = resultGroup.length"
            style="cursor: pointer">
          &vellip; {{resultGroup.length - resultLimit}} more changed results
        </div>
      </div>
    </div>
  </div>
  <div style="clear: both"></div>
</div>
